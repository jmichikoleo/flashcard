<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-8">Flashcard App</h1>
        
        <div class="flex justify-center mb-8">
            <button class="bg-blue-900 text-white px-4 py-2 rounded" onclick="openDeckForm()">Add New Deck</button>
        </div>

        <div id="decksContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="bg-white p-4 rounded-lg shadow-md" id="deck1">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold">Deck 1</h2>
                    <div>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded mr-2" onclick="deleteDeck('deck1')">Delete Deck</button>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded" onclick="openForm('deck1')">Add Card</button>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded" onclick="openDeck('deck1')">Open Deck</button>
                    </div>
                </div>
                <div class="space-y-2" id="deck1-cards">
                    <div class="p-4 bg-gray-100 rounded-lg shadow flex justify-between items-center">
                        <span>Card 1</span>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded" onclick="deleteCard(this)">Delete</button>
                    </div>
                    <div class="p-4 bg-gray-100 rounded-lg shadow flex justify-between items-center">
                        <span>Card 2</span>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded" onclick="deleteCard(this)">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="popupForm" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
            <h2 class="text-2xl font-bold mb-4">Add New Card</h2>
            <form id="cardForm">
                <div class="mb-4">
                    <label for="deck" class="block text-sm font-medium text-gray-700">Deck</label>
                    <select id="deck" class="border rounded p-2 w-full">
                        <option value="deck1">Deck 1</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="cardContent" class="block text-sm font-medium text-gray-700">Card Content</label>
                    <textarea id="cardContent" class="border rounded p-2 w-full" rows="4"></textarea>
                </div>
                <div class="flex justify-end">
                    <button type="button" class="bg-blue-600 text-white px-4 py-2 rounded mr-2" onclick="closeForm()">Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Add Card</button>
                </div>
            </form>
        </div>
    </div>

    <div id="deckForm" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
            <h2 class="text-2xl font-bold mb-4">Add New Deck</h2>
            <form id="newDeckForm">
                <div class="mb-4">
                    <label for="deckName" class="block text-sm font-medium text-gray-700">Deck Name</label>
                    <input type="text" id="deckName" class="border rounded p-2 w-full">
                </div>
                <div class="flex justify-end">
                    <button type="button" class="bg-blue-900 text-white px-4 py-2 rounded mr-2" onclick="closeDeckForm()">Cancel</button>
                    <button type="submit" class="bg-blue-900 text-white px-4 py-2 rounded">Add Deck</button>
                </div>
            </form>
        </div>
    </div>

    <div id="deckViewer" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
            <h2 class="text-2xl font-bold mb-4" id="deckTitle">Deck</h2>
            <div id="flashcards" class="space-y-4">
            </div>
            <div class="flex justify-end mt-4">
                <button type="button" class="bg-blue-900 text-white px-4 py-2 rounded" onclick="closeDeckViewer()">Close</button>
            </div>
        </div>
    </div>

    <script>
        function openForm(deck) {
            document.getElementById('popupForm').classList.remove('hidden');
            document.getElementById('deck').value = deck;
        }

        function closeForm() {
            document.getElementById('popupForm').classList.add('hidden');
        }

        function openDeckForm() {
            document.getElementById('deckForm').classList.remove('hidden');
        }

        function closeDeckForm() {
            document.getElementById('deckForm').classList.add('hidden');
        }

        function openDeck(deckId) {
            const deckTitle = document.querySelector(`#${deckId} h2`).textContent;
            document.getElementById('deckTitle').textContent = deckTitle;
            const cards = document.querySelectorAll(`#${deckId}-cards .flex`);
            const flashcardsContainer = document.getElementById('flashcards');
            flashcardsContainer.innerHTML = '';
            cards.forEach(card => {
                const cardContent = card.querySelector('span').textContent;
                const flashcard = document.createElement('div');
                flashcard.className = 'p-4 bg-gray-100 rounded-lg shadow';
                flashcard.textContent = cardContent;
                flashcardsContainer.appendChild(flashcard);
            });
            document.getElementById('deckViewer').classList.remove('hidden');
        }

        function closeDeckViewer() {
            document.getElementById('deckViewer').classList.add('hidden');
        }

        function deleteDeck(deckId) {
            document.getElementById(deckId).remove();
            const deckSelect = document.getElementById('deck');
            const optionToRemove = [...deckSelect.options].find(option => option.value === deckId);
            if (optionToRemove) {
                optionToRemove.remove();
            }
        }

        function deleteCard(cardElement) {
            cardElement.closest('.flex').remove();
        }

        document.getElementById('cardForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const deck = document.getElementById('deck').value;
            const cardContent = document.getElementById('cardContent').value;
            const cardContainer = document.getElementById(`${deck}-cards`);
            const card = document.createElement('div');
            card.className = 'p-4 bg-gray-100 rounded-lg shadow flex justify-between items-center';
            card.innerHTML = `
                <span>${cardContent}</span>
                <button class="bg-red-600 text-white px-2 py-1 rounded" onclick="deleteCard(this)">Delete</button>
            `;
            cardContainer.appendChild(card);
            closeForm();
        });

        document.getElementById('newDeckForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const deckName = document.getElementById('deckName').value;
            const deckId = `deck${document.querySelectorAll('.bg-white').length + 1}`;
            const deckContainer = document.createElement('div');
            deckContainer.className = 'bg-white p-4 rounded-lg shadow-md';
            deckContainer.id = deckId;
            deckContainer.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold">${deckName}</h2>
                    <div>
                        <button class="bg-red-600 text-white px-2 py-1 rounded mr-2" onclick="deleteDeck('${deckId}')">Delete Deck</button>
                        <button class="bg-blue-900 text-white px-2 py-1 rounded" onclick="openForm('${deckId}')">Add Card</button>
                        <button class="bg-green-600 text-white px-2 py-1 rounded" onclick="openDeck('${deckId}')">Open Deck</button>
                    </div>
                </div>
                <div class="space-y-2" id="${deckId}-cards"></div>
            `;
            document.getElementById('decksContainer').appendChild(deckContainer);
            const deckOption = document.createElement('option');
            deckOption.value = deckId;
            deckOption.textContent = deckName;
            document.getElementById('deck').appendChild(deckOption);
            closeDeckForm();
        });
    </script>
</body>
</html>
